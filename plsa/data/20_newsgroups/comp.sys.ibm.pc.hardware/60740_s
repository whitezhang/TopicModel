
 in article <1993apr19.055039.29715@oec4.orbital.dialix.oz.au>
     oecjtb@oec4.orbital.dialix.oz.au (john bongiovanni) writes:
   [stuff deleted]
 >did i once hear that in order for the date to advance, something, like a 
 >clock, *has* to make a get date system call? apparently, the clock
 >hardware interrupt and bios don't do this (date advance) automatically. the
 >get date call notices that a "midnight reset" flag has been set, and then
 >then advances the date.
 >
 >anybody with more info?
 
 there are two 'problems':
 (1) the bios tod routine which updates the bios clock uses only 1 bit
     for day increment, so a second wrapping of the clock past midnight
     will get lost if no one calls the bios to read the clock in the
     meantime, and
 (2) the bios resets the day wrap indicator on the first 'get date'
     call from anybody (after the wrap indicator has been set). so
     unless the first bios 'get date' call after midnight is done by
     the dos 'kernel' (which is the only part of dos which knows how to
     increment the date, the day wrap indication is normally lost.
 my guess is that kevin's 'menu' system uses bios calls to read the
 clock (in order to display the time), and is hence the entity which
 causes the day wrap indication to get lost. even if the 'menu' system
 'notices' the day 'wrap' (which i think is indicated by a non-zero
 value in al), there really isn't any particularly good way to tell dos
 about it, so that dos can update the day. the menu system 'should' use
 dos calls to get the time, which would cause the dos 'kernel' to do
 the bios call, and the wrap indicator would hence be processed
 properly.  possibly, though, the 'menu' system can't easily use dos
 calls for time, because dos is not reentrant, and perhaps time
 incrementing ofters occur while the 'menu' system is 'inside' some
 other dos call.
 
 wally bass
 