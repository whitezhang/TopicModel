
 pdb059@ipl.jpl.nasa.gov (paul bartholomew) writes:
 
 <clip clip>
 
 >interesting.  would you care to explain to me then, how my soundblaster
 >pro card and my printer card are sharing irq 7 successfully?  i assure
 >you that they are both set to irq 7 and that i have no problem.  my
 >computer is a dtk 286-12 ibm clone.
 
 running ms-dos or a derivative os, obviously. please take note that the
 following is not what exactly happens, but a slightly simplified
 explanation.
 
 technically, the irq line is only a means for the device (printer
 adapter, soundblaster, modem, hard disk, ...) to signal the cpu that
 "something's happening here, please take note." how the cpu is
 programmed to handle this signal is usually up to the operating system.
 in ms-dos, the "interrupt vector" is used to store the address of the
 function that handles each interrupt.
 
 now, basic dos doesn't care whether the printer reports that it's ready
 to print some more stuff or not - it simply ignores the interrupt.  when
 dos prints, it looks at the lpt buffer.  if there's a character there,
 wait a while and check again.  if there's not, copy a new character to
 the lpt port.  since the irq 7 is ignored as a printer interrupt, it's
 free for use for any other adapters - in this case, the sb. 
 
 with any multitasking or otherwise advanced os, this kind of printing
 approach just doesn't work (or more precisely, it wastes a lot of cpu
 cycles.) hence, you can't "share" the irq 7 with lpt1 and sb if you're
 running unix or os/2 or whatnot.
 
 another issue with the sb is that only the digitized sound uses
 interrupts. when the sb plays plain music, the cpu simply tells it what
 to play until told otherwise. with digitized sound the interrupt is
 required to notify the cpu when the output ends and new data is
 needed.
 
 you can, however, hook two (or more) com ports to one interrupt, but use
 them only one at a time.  this is because the interrupt handling routine
 is same for both ports, and it can see from which port the data came
 from. this, of course, applies for some other devices (like lpt) as well.
 
 remember, this was greatly simplified in parts, but i think gives the
 general picture correctly enough.
 
 cheers,
 
 -- 
                juha liukkonen, aka jliukkon@cc.helsinki.fi
               university of helsinki,  dept. of  lost souls
            "trust me, i know what i'm doing." - sledge hammer
 